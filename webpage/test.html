<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smartbins</title>
</head>
<body>


    <canvas id="myChart" style="width:100%;max-width:700px"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>


<script>
        var xValues = [];
        var yValues = [];

    fetch("pico_Test.json", { cache: "no-cache"})
        .then(x => x.text())
        .then(y => processData(y));

    function processData(rawData){
        entries = [];
        rawData = rawData.split("\n");
        let n = 0;
        for (let line of rawData){
            if (line /*&& n %2 == 0*/) {
              line = line;
              console.log(line)
                let d = JSON.parse(line);
                entries.push(d);

            }
            n++;
        }


        for (let line of entries){
          console.log(line)
            xValues.push(line.time)
            yValues.push(line.reading)

        }
        }


    // a = 0.6931471806/5730
    //     s = 100;

    // for (i=0; i<8; i++){
        //t = ;
        
        //T = 
       // xValues.push(t);
       // yValues.push(T);
    
    new Chart("myChart", {
      type: "line",
      data:{
        labels: xValues,
        datasets: [{
          fill: false,
          lineTension: 0,
          backgroundColor: "rgba(0,0,255,1.0)",
          borderColor: "rgba(0,0,255,0.1)",
          data: yValues
        }]
      },
      options: {
        legend: {display: false},
        scales: {
          xAxes: [{ticks: {min: 0, max:300}}],
          yAxes: [{ticks: {min: 0, max:300}}],
        }
      }
    });
    </script>

</body>
</html>